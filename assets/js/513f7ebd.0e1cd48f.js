(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{114:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return l}));var a=n(3),o=n(8),i=(n(0),n(218)),r={title:"Documentation"},c={unversionedId:"additional-features/apiato-containers/documentation",id:"additional-features/apiato-containers/documentation",isDocsHomePage:!1,title:"Documentation",description:"- Requirements",source:"@site/docs/additional-features/apiato-containers/documentation.md",sourceDirName:"additional-features/apiato-containers",slug:"/additional-features/apiato-containers/documentation",permalink:"/docs/next/additional-features/apiato-containers/documentation",editUrl:"https://github.com/apiato/documentation/tree/master/docs/additional-features/apiato-containers/documentation.md",version:"current",lastUpdatedBy:"Mohammad Alavi",lastUpdatedAt:1618650178,formattedLastUpdatedAt:"4/17/2021",frontMatter:{title:"Documentation"},sidebar:"docs",previous:{title:"Container Installer",permalink:"/docs/next/additional-features/container-installer"},next:{title:"Debugger",permalink:"/docs/next/additional-features/apiato-containers/debugger"}},p=[{value:"Requirements",id:"requirements",children:[]},{value:"Usage",id:"usage",children:[{value:"Write PHP <strong>docblock</strong>",id:"write-php-docblock",children:[]},{value:"Run documentation generator",id:"run-documentation-generator",children:[]},{value:"Visit documentation URL&#39;s",id:"visit-docs-urls",children:[]},{value:"Shared response",id:"shared-response",children:[]}]},{value:"Documentation customization",id:"documentation-customization",children:[{value:"Edit the default generated values in the templates:",id:"edit-the-default-generated-values-in-the-templates",children:[]},{value:"Change the Documentations URL&#39;s",id:"change-the-documentations-urls",children:[]},{value:"Edit the Documentation Header",id:"edit-the-documentation-header",children:[]}]}],s={toc:p};function l(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#requirements"},"Requirements")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#usage"},"Usage"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#write-php-docblock"},"Write PHP ",Object(i.b)("strong",{parentName:"a"},"docblock"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#run-documentation-generator"},"Run documentation generator")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#visit-docs-urls"},"Visit documentation URL's")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#shared-response"},"Shared response")))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#documentation-customization"},"Documentation Customization"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#edit-the-default-generated-values-in-the-templates"},"Edit the default generated values in the templates:")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#change-the-documentations-urls"},"Change the Documentations URL's")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"#edit-the-documentation-header"},"Edit the Documentation Header"))))),Object(i.b)("p",null,"Every great API needs a great Documentation."),Object(i.b)("p",null,"Apiato make writing and generating documentations very easy with the ",Object(i.b)("inlineCode",{parentName:"p"},"php artisan apiato:apidoc")," command."),Object(i.b)("h2",{id:"requirements"},"Requirements"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Install ",Object(i.b)("a",{parentName:"p",href:"http://apidocjs.com/"},"ApiDocJs")," in the project directory"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"(",Object(i.b)("inlineCode",{parentName:"li"},"npm install apidoc"),")"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"(Recommended) read the ",Object(i.b)("a",{parentName:"p",href:"../../main-components/routes"},"Routes")," page first."))),Object(i.b)("h2",{id:"usage"},"Usage"),Object(i.b)("h3",{id:"write-php-docblock"},"Write PHP ",Object(i.b)("strong",{parentName:"h3"},"docblock")),Object(i.b)("p",null,"Write a PHP ",Object(i.b)("strong",{parentName:"p"},"docblock")," on top of your endpoint like this:"),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"For more info about the parameters check out ",Object(i.b)("a",{parentName:"em",href:"http://apidocjs.com/#install"},"ApiDocJs")," documentation")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-php"},'/**\n * @apiGroup           Authentication\n * @apiName            UserLogin\n * @api                {post} /clients/web/login User Login\n * @apiDescription     Description Here....\n * @apiVersion         1.0.0\n * @apiPermission      none\n *\n * @apiHeader          Accept application/json\n *\n * @apiParam           {String}     email\n * @apiParam           {String}     password\n *\n * @apiSuccessExample  {json}       Success-Response:\n *   HTTP/1.1 200 OK\n *   {\n *     "data": {\n *       "id": "XbPW7awNkzl83LD6",\n *       "name": "Super Admin",\n *       "email": "admin@admin.com"\n *       ...\n *   }\n *\n * @apiErrorExample  {json}       Error-Response:\n *   {\n *      "message":"401 Credentials Incorrect.",\n *      "status_code":401\n *   }\n *\n * @apiErrorExample  {json}       Error-Response:\n *   {\n *      "message":"Invalid Input.",\n *      "errors":{\n *         "email":[\n *            "The email field is required."\n *         ]\n *      },\n *      "status_code":422\n *   }\n */\n\nuse App\\Containers\\AppSection\\Authentication\\UI\\API\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Route;\n\nRoute::post(\'clients/web/login\', [Controller::class, \'proxyLoginForWebClient\']);\n')),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"All the Endpoint ",Object(i.b)("inlineCode",{parentName:"p"},"DocBlocks")," MUST be written inside Routes files, otherwise they won't be loaded."))),Object(i.b)("h3",{id:"run-documentation-generator"},"Run documentation generator"),Object(i.b)("p",null,"Run the documentation generator command from the root directory:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"\nphp artisan apiato:apidoc\n\n")),Object(i.b)("h4",{id:"error-apidoc-not-found-"},"Error: ApiDoc not found !!"),Object(i.b)("p",null,"If you get an error (",Object(i.b)("inlineCode",{parentName:"p"},"apidoc not found"),"),"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Read about ",Object(i.b)("a",{parentName:"p",href:"#documentation-customization"},"container customization"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Open the container config file ",Object(i.b)("inlineCode",{parentName:"p"},"app/Containers/VendorSection/Documentation/Configs/vendorSection-documentation.php"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Edit the ",Object(i.b)("inlineCode",{parentName:"p"},"executable")," path to ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("inlineCode",{parentName:"strong"},"$(npm bin)/apidoc"))," or to however you access the ",Object(i.b)("inlineCode",{parentName:"p"},"apidoc")," tool on your machine."))),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-php"},"    /*\n    |--------------------------------------------------------------------------\n    | Executable\n    |--------------------------------------------------------------------------\n    |\n    | Specify how you run or access the `apidoc` tool on your machine.\n    |\n    */\n\n    'executable' => 'node_modules/.bin/apidoc',\n    // 'executable' => 'apidoc',\n")),Object(i.b)("h3",{id:"visit-docs-urls"},"Visit documentation URL's"),Object(i.b)("p",null,"Visit documentation URL's as shown in your terminal:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Public (external) API at ",Object(i.b)("a",{parentName:"li",href:"http://apiato.test/docs"},"http://apiato.test/docs"),"."),Object(i.b)("li",{parentName:"ul"},"Private (internal) API at ",Object(i.b)("a",{parentName:"li",href:"http://apiato.test/docs/private"},"http://apiato.test/docs/private"),".")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Every time you change the DocBlock of a Route file you need to run the ",Object(i.b)("inlineCode",{parentName:"p"},"apiato:apidoc")," command, to regenerate."))),Object(i.b)("h3",{id:"shared-response"},"Shared response"),Object(i.b)("p",null,"You can use shared responses to update the documentation faster, with less outdated responses and prevent duplicating the responses between routes.  "),Object(i.b)("p",null,"Example: ",Object(i.b)("inlineCode",{parentName:"p"},"_user.v1.public.php")," will contain all responses (single, multiple...) of the User:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-php"},'/**\n * @apiDefine UserSuccessSingleResponse\n * @apiSuccessExample {json} Success-Response:\nHTTP/1.1 200 OK\n{\n   "data":{\n      "object":"User",\n      "id":eqwja3vw94kzmxr0,\n   },\n   "meta":{\n      "include":[],\n      "custom":[]\n   }\n}\n */\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Usage of the shared User response from any endpoint:")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-php"},"* @apiUse UserSuccessSingleResponse\n")),Object(i.b)("h2",{id:"documentation-customization"},"Documentation customization"),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Instructions")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"This container works out of the box perfectly but if you want to change its configs or modify the codes you MUST follow these steps:"),Object(i.b)("p",{parentName:"div"},"1- Copy the container from ",Object(i.b)("inlineCode",{parentName:"p"},"VendorSection")," to ",Object(i.b)("inlineCode",{parentName:"p"},"AppSection")," (or any of your custom sections) of your project",Object(i.b)("br",null),"\n2- Fix any broken namespaces",Object(i.b)("br",null),"\n3- Update ",Object(i.b)("inlineCode",{parentName:"p"},"section_name")," & ",Object(i.b)("inlineCode",{parentName:"p"},"html_files")," in container configs",Object(i.b)("br",null),"\n4- Update ",Object(i.b)("inlineCode",{parentName:"p"},"apidoc.json")," files in ",Object(i.b)("inlineCode",{parentName:"p"},"ApiDocJs/private")," & ",Object(i.b)("inlineCode",{parentName:"p"},"public")," folders and fix the ",Object(i.b)("inlineCode",{parentName:"p"},"filename"),Object(i.b)("br",null)),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "header": {\n        "filename": "Containers/NEW_SECTION_NAME/Documentation/UI/WEB/Views/documentation/header.md"\n    }\n}\n')))),Object(i.b)("h3",{id:"edit-the-default-generated-values-in-the-templates"},"Edit the default generated values in the templates:"),Object(i.b)("p",null,"Apiato by defaults generates 2 API documentations, each one has its own ",Object(i.b)("inlineCode",{parentName:"p"},"apidoc.json")," file. Both can be modified from the Documentation Containers in ",Object(i.b)("inlineCode",{parentName:"p"},"Containers/VendorSection/Documentation/ApiDocJs/")),Object(i.b)("h3",{id:"change-the-documentations-urls"},"Change the Documentations URL's"),Object(i.b)("p",null,"Edit the config file of the Documentation Container ",Object(i.b)("inlineCode",{parentName:"p"},"Containers/VendorSection/Documentation/Configs/vendorSection-documentation.php")),Object(i.b)("h3",{id:"edit-the-documentation-header"},"Edit the Documentation Header"),Object(i.b)("p",null,"The header is usually the Overview of your API. It contains Info about authenticating users, making requests, responses, potential errors, rate limiting, pagination, query parameters and anything you want."),Object(i.b)("p",null,"All this information is written in ",Object(i.b)("inlineCode",{parentName:"p"},"app/Containers/VendorSection/Documentation/ApiDocJs/shared/header.template.md")," file, and the same file is used as header for both private and public documentations."),Object(i.b)("p",null,"To edit the content just open the markdown file in any markdown editor and edit it."),Object(i.b)("p",null,"You will notice some variables like ",Object(i.b)("inlineCode",{parentName:"p"},"{{rate-limit}}")," and ",Object(i.b)("inlineCode",{parentName:"p"},"{{token-expires}}"),". Those are replaced when running ",Object(i.b)("inlineCode",{parentName:"p"},"apiato:apidoc")," with real values from your application configuration files."),Object(i.b)("p",null,"Feel free to extend them to include more info about your API from the ",Object(i.b)("inlineCode",{parentName:"p"},"app/Containers/VendorSection/Documentation/Tasks/RenderTemplatesTask.php")," class."))}l.isMDXComponent=!0},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),l=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=l(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=l(n),m=a,u=d["".concat(r,".").concat(m)]||d[m]||b[m]||i;return n?o.a.createElement(u,c(c({ref:t},s),{},{components:n})):o.a.createElement(u,c({ref:t},s))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=m;var c={};for(var p in t)hasOwnProperty.call(t,p)&&(c[p]=t[p]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var s=2;s<i;s++)r[s]=n[s];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);